{
  "version": 3,
  "sources": ["../../../worker/node_modules/src/src/Router.ts", "../../../worker/node_modules/src/src/StatusError.ts", "../../../worker/node_modules/src/src/createResponse.ts", "../../../worker/node_modules/src/src/json.ts", "../../../worker/node_modules/src/src/error.ts", "../../../worker/node_modules/src/src/status.ts", "../../../worker/node_modules/src/src/text.ts", "../../../worker/node_modules/src/src/html.ts", "../../../worker/node_modules/src/src/jpeg.ts", "../../../worker/node_modules/src/src/png.ts", "../../../worker/node_modules/src/src/webp.ts", "../../../worker/node_modules/src/src/withContent.ts", "../../../worker/node_modules/src/src/withCookies.ts", "../../../worker/node_modules/src/src/withParams.ts", "../../../worker/node_modules/src/src/createCors.ts", "../../../worker/db.ts", "../../../worker/logic.ts", "../../../worker/index.ts", "../../../worker/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../worker/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-fGRUdt/middleware-insertion-facade.js", "../../../worker/node_modules/wrangler/templates/middleware/common.ts", "../bundle-fGRUdt/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\Users\\adhij\\Downloads\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\.wrangler\\tmp\\dev-acLhMu",
  "sourcesContent": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "import type { D1Database, D1Result } from \"@cloudflare/workers-types\";\r\n\r\nexport interface Env {\r\n  DB?: D1Database;\r\n  roaster_app?: D1Database;\r\n  ALLOWED_ORIGINS?: string;\r\n}\r\n\r\nfunction getDb(env: Env): D1Database {\r\n  const db = env.DB ?? env.roaster_app;\r\n  if (!db) {\r\n    throw new Error(\"D1 binding not configured. Expected DB or roaster_app.\");\r\n  }\r\n  return db;\r\n}\r\n\r\nexport async function queryAll<T>(\r\n  env: Env,\r\n  sql: string,\r\n  params: unknown[] = []\r\n): Promise<T[]> {\r\n  const stmt = getDb(env).prepare(sql).bind(...params);\r\n  const { results } = (await stmt.all()) as D1Result<T>;\r\n  return results ?? [];\r\n}\r\n\r\nexport async function queryOne<T>(\r\n  env: Env,\r\n  sql: string,\r\n  params: unknown[] = []\r\n): Promise<T | null> {\r\n  const items = await queryAll<T>(env, sql, params);\r\n  return items[0] ?? null;\r\n}\r\n\r\nexport async function execute(\r\n  env: Env,\r\n  sql: string,\r\n  params: unknown[] = []\r\n) {\r\n  const stmt = getDb(env).prepare(sql).bind(...params);\r\n  const { meta } = await stmt.run();\r\n  return meta;\r\n}\r\n\r\nexport async function transaction(\r\n  env: Env,\r\n  statements: { sql: string; params?: unknown[] }[]\r\n) {\r\n  const db = getDb(env);\r\n  const prepared = statements.map(({ sql, params = [] }) =>\r\n    db.prepare(sql).bind(...params)\r\n  );\r\n  await db.batch(prepared);\r\n}\r\n\r\n\r\n", "import type { Shoot, Vacation } from \"./types\";\r\n\r\nexport function parseNumber(value: unknown): number | undefined {\r\n  if (value === null || value === undefined || value === \"\") return undefined;\r\n  const num = Number(value);\r\n  return Number.isFinite(num) ? num : undefined;\r\n}\r\n\r\nexport function parseIsoDate(value: unknown): string | undefined {\r\n  if (!value) return undefined;\r\n  const str = String(value);\r\n  if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(str)) return undefined;\r\n  return str;\r\n}\r\n\r\nexport function parseRangeToIso(range: string): { start: string; end: string } | null {\r\n  const match = range.match(\r\n    /(\\d{2})-(\\d{2})-(\\d{4})\\s*TO\\s*(\\d{2})-(\\d{2})-(\\d{4})/i\r\n  );\r\n  if (!match) {\r\n    return null;\r\n  }\r\n  const [, d1, m1, y1, d2, m2, y2] = match;\r\n  return {\r\n    start: `${y1}-${m1}-${d1}`,\r\n    end: `${y2}-${m2}-${d2}`\r\n  };\r\n}\r\n\r\nexport function normalizeArtistName(name: string): string {\r\n  return name.trim().toUpperCase();\r\n}\r\n\r\nexport function parseArtistList(input: string | null | undefined): string[] {\r\n  if (!input) return [];\r\n  return input\r\n    .split(/[;,]/)\r\n    .map((token) => normalizeArtistName(token))\r\n    .filter(Boolean);\r\n}\r\n\r\nexport function computeShootDerivedFields(input: Partial<Shoot>): Partial<Shoot> {\r\n  const result: Partial<Shoot> = { ...input };\r\n\r\n  if (input.shoot_dates && (!input.shoot_start_date || !input.shoot_end_date)) {\r\n    const range = parseRangeToIso(String(input.shoot_dates));\r\n    if (range) {\r\n      result.shoot_start_date = range.start;\r\n      result.shoot_end_date = range.end;\r\n      result.inv_date = result.inv_date ?? range.start;\r\n    }\r\n  }\r\n\r\n  const perDay = parseNumber(input.per_day_rate);\r\n  const days = parseNumber(input.work_days);\r\n  let artists = parseNumber(input.total_artists);\r\n  const amount = parseNumber(input.amount);\r\n  const received = parseNumber(input.received);\r\n\r\n  if (input.artist_provided) {\r\n    const artistsList = parseArtistList(input.artist_provided);\r\n    result.artist_provided = artistsList.join(\", \");\r\n    if (!artists || artistsList.length > (artists ?? 0)) {\r\n      artists = artistsList.length;\r\n    }\r\n    result.total_artists = artists;\r\n  } else if (artists) {\r\n    result.total_artists = artists;\r\n  }\r\n\r\n  if (perDay !== undefined && days !== undefined && artists !== undefined) {\r\n    result.amount = perDay * days * artists;\r\n  } else if (amount !== undefined) {\r\n    result.amount = amount;\r\n  }\r\n\r\n  if (result.amount !== undefined) {\r\n    const rec = received ?? 0;\r\n    result.received = rec;\r\n    result.balance = result.amount - rec;\r\n    if (result.amount > 0) {\r\n      if ((result.balance ?? 0) === 0) {\r\n        result.status = \"PAID\";\r\n      } else if (rec > 0) {\r\n        result.status = \"PARTIAL\";\r\n      } else {\r\n        result.status = result.status ?? \"PENDING\";\r\n      }\r\n    }\r\n  }\r\n\r\n  if (input.inv_date) {\r\n    const parsed = parseIsoDate(input.inv_date);\r\n    if (parsed) {\r\n      result.inv_date = parsed;\r\n    }\r\n  }\r\n\r\n  if (result.coordinator) {\r\n    result.coordinator = result.coordinator.trim().toUpperCase();\r\n  }\r\n  if (result.invoice_no) {\r\n    result.invoice_no = result.invoice_no.trim().toUpperCase();\r\n  }\r\n  if (result.location) {\r\n    result.location = result.location.trim().toUpperCase();\r\n  }\r\n  if (result.work_type) {\r\n    result.work_type = result.work_type.trim().toUpperCase();\r\n  }\r\n  if (result.description) {\r\n    result.description = result.description.trim().toUpperCase();\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function expandDateRange(from: string, to: string): string[] {\r\n  const result: string[] = [];\r\n  const startDate = new Date(from);\r\n  const endDate = new Date(to);\r\n  for (let d = new Date(startDate); d <= endDate; d.setDate(d.getDate() + 1)) {\r\n    const iso = d.toISOString().slice(0, 10);\r\n    result.push(iso);\r\n  }\r\n  return result;\r\n}\r\n\r\nexport interface RoasterCell {\r\n  type: \"BOOKED\" | \"VACATION\" | \"CONFLICT\";\r\n  details: unknown;\r\n}\r\n\r\nexport type RoasterMatrix = Record<string, Record<string, RoasterCell>>;\r\n\r\nexport interface RoasterBuildResult {\r\n  artists: string[];\r\n  dates: string[];\r\n  matrix: RoasterMatrix;\r\n  entries: Array<{\r\n    date: string;\r\n    artist: string;\r\n    source_invoice: string;\r\n    coordinator?: string | null;\r\n    location?: string | null;\r\n    work_type?: string | null;\r\n    description?: string | null;\r\n  }>;\r\n}\r\n\r\nexport function buildRoasterMatrix(\r\n  shoots: Shoot[],\r\n  vacations: Vacation[],\r\n  month: number,\r\n  year: number\r\n): RoasterBuildResult {\r\n  const monthStr = month.toString().padStart(2, \"0\");\r\n  const matrix: RoasterMatrix = {};\r\n  const entries: RoasterBuildResult[\"entries\"] = [];\r\n  const dateSet = new Set<string>();\r\n  const artistSet = new Set<string>();\r\n\r\n  const addDate = (date: string) => {\r\n    if (!date.startsWith(`${year}-${monthStr}-`)) return false;\r\n    if (!dateSet.has(date)) {\r\n      dateSet.add(date);\r\n    }\r\n    return true;\r\n  };\r\n\r\n  const addCell = (\r\n    date: string,\r\n    artist: string,\r\n    type: RoasterCell[\"type\"],\r\n    details: unknown\r\n  ) => {\r\n    if (!matrix[date]) matrix[date] = {};\r\n    const current = matrix[date][artist];\r\n    if (!current) {\r\n      matrix[date][artist] = { type, details };\r\n    } else if (current.type !== type) {\r\n      matrix[date][artist] = {\r\n        type: \"CONFLICT\",\r\n        details: { existing: current, incoming: { type, details } }\r\n      };\r\n    }\r\n  };\r\n\r\n  for (const shoot of shoots) {\r\n    if (!shoot.shoot_start_date || !shoot.shoot_end_date) continue;\r\n    const artistList = parseArtistList(shoot.artist_provided);\r\n    artistList.forEach((artist) => artistSet.add(artist));\r\n    const dates = expandDateRange(shoot.shoot_start_date, shoot.shoot_end_date);\r\n    for (const date of dates) {\r\n      if (!addDate(date)) continue;\r\n      for (const artist of artistList) {\r\n        addCell(date, artist, \"BOOKED\", {\r\n          invoice_no: shoot.invoice_no,\r\n          work_type: shoot.work_type,\r\n          location: shoot.location\r\n        });\r\n        entries.push({\r\n          date,\r\n          artist,\r\n          source_invoice: shoot.invoice_no,\r\n          coordinator: shoot.coordinator ?? null,\r\n          location: shoot.location ?? null,\r\n          work_type: shoot.work_type ?? null,\r\n          description: shoot.description ?? null\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  for (const vacation of vacations) {\r\n    if (!vacation.vacation_start || !vacation.vacation_end || !vacation.artist)\r\n      continue;\r\n    const artist = normalizeArtistName(vacation.artist);\r\n    artistSet.add(artist);\r\n    const dates = expandDateRange(vacation.vacation_start, vacation.vacation_end);\r\n    for (const date of dates) {\r\n      if (!addDate(date)) continue;\r\n      addCell(date, artist, \"VACATION\", {\r\n        reason: vacation.reason\r\n      });\r\n    }\r\n  }\r\n\r\n  return {\r\n    artists: Array.from(artistSet).sort(),\r\n    dates: Array.from(dateSet).sort(),\r\n    matrix,\r\n    entries\r\n  };\r\n}\r\n\r\n\r\nexport function calculateCoordinatorAmount(params: {\r\n  date?: string | null;\r\n  number_of_artists: number;\r\n  work_type?: string | null;\r\n  per_day_rate?: number | null;\r\n  work_days?: number | null;\r\n  artists?: string | null;\r\n}) {\r\n  const n = parseNumber(params.number_of_artists) ?? 0;\r\n  const rate = parseNumber(params.per_day_rate) ?? 0;\r\n  const days = parseNumber(params.work_days) ?? 1;\r\n  const total = n * rate * days;\r\n  const perDay = rate * n;\r\n  const list = parseArtistList(params.artists);\r\n  const perArtistAmount = n > 0 ? total / n : 0;\r\n  const breakdown = (list.length ? list : Array.from({ length: n }, (_, i) => `ARTIST_${i + 1}`)).map((name) => ({\r\n    artist: name,\r\n    amount: perArtistAmount\r\n  }));\r\n  return {\r\n    date: params.date ?? null,\r\n    work_type: params.work_type ?? null,\r\n    number_of_artists: n,\r\n    per_day_rate: rate,\r\n    work_days: days,\r\n    total,\r\n    per_day: perDay,\r\n    breakdown\r\n  };\r\n}\r\n\r\n\r\n\r\n", "import { Router } from \"itty-router\";\r\nimport type { Env } from \"./db\";\r\nimport { queryAll, queryOne, execute, transaction } from \"./db\";\r\nimport {\r\n  buildRoasterMatrix,\r\n  computeShootDerivedFields,\r\n  expandDateRange,\r\n  normalizeArtistName,\r\n  parseArtistList,\r\n  parseIsoDate,\r\n  parseNumber,\r\n  parseRangeToIso,\r\n  calculateCoordinatorAmount\r\n} from \"./logic\";\r\nimport type {\r\n  ApiResponse,\r\n  Paginated,\r\n  Shoot,\r\n  Expense,\r\n  Payment,\r\n  Vacation,\r\n  MasterData,\r\n  RoasterEntry,\r\n  Summary\r\n} from \"./types\";\r\n  \r\nconst router = Router();\r\n\r\nconst DEFAULT_PAGE_SIZE = 25;\r\nconst MAX_PAGE_SIZE = 200;\r\n\r\nfunction json<T>(body: ApiResponse<T> | T, status = 200): Response {\r\n  const payload =\r\n    body && typeof body === \"object\" && \"success\" in (body as ApiResponse<T>)\r\n      ? (body as ApiResponse<T>)\r\n      : ({ success: true, data: body as T } satisfies ApiResponse<T>);\r\n  return new Response(JSON.stringify(payload), {\r\n    status,\r\n    headers: {\r\n      \"Content-Type\": \"application/json\"\r\n    }\r\n  });\r\n}\r\n\r\nasync function readJson<T = unknown>(request: Request): Promise<T> {\r\n  const text = await request.text();\r\n  if (!text) throw new Error(\"Empty JSON body\");\r\n  return JSON.parse(text) as T;\r\n}\r\n\r\nfunction withCors(request: Request, env: Env, response: Response): Response {\r\n  const origin = request.headers.get(\"Origin\");\r\n  const allowed =\r\n    env.ALLOWED_ORIGINS?.split(\",\").map((o) => o.trim()) ?? [\"*\"];\r\n\r\n  const headers = new Headers(response.headers);\r\n  if (!origin || allowed.includes(\"*\")) {\r\n    headers.set(\"Access-Control-Allow-Origin\", \"*\");\r\n  } else if (allowed.includes(origin)) {\r\n    headers.set(\"Access-Control-Allow-Origin\", origin);\r\n    headers.set(\"Vary\", \"Origin\");\r\n  }\r\n\r\n  headers.set(\r\n    \"Access-Control-Allow-Methods\",\r\n    \"GET,POST,PUT,PATCH,DELETE,OPTIONS\"\r\n  );\r\n  headers.set(\r\n    \"Access-Control-Allow-Headers\",\r\n    \"Content-Type,Authorization,Origin,Accept\"\r\n  );\r\n\r\n  return new Response(response.body, { status: response.status, headers });\r\n}\r\n\r\nfunction getPagination(url: URL) {\r\n  const page = Math.max(1, parseInt(url.searchParams.get(\"page\") || \"1\", 10));\r\n  const rawPageSize = parseInt(\r\n    url.searchParams.get(\"pageSize\") || `${DEFAULT_PAGE_SIZE}`,\r\n    10\r\n  );\r\n  const pageSize = Math.min(MAX_PAGE_SIZE, Math.max(1, rawPageSize || DEFAULT_PAGE_SIZE));\r\n  const offset = (page - 1) * pageSize;\r\n  return { page, pageSize, offset };\r\n}\r\n\r\nfunction normalizeExpense(input: Partial<Expense>): Partial<Expense> {\r\n  const result: Partial<Expense> = { ...input };\r\n  const iso = parseIsoDate(input.date);\r\n  if (iso) result.date = iso;\r\n  const out = parseNumber(input.amount_out);\r\n  const inc = parseNumber(input.amount_in);\r\n  if (out !== undefined) result.amount_out = out;\r\n  if (inc !== undefined) result.amount_in = inc;\r\n  if (out !== undefined || inc !== undefined) {\r\n    result.total_expense =\r\n      result.total_expense ?? (out ?? 0) - (inc ?? 0);\r\n  }\r\n  if (input.paid_for_artist) {\r\n    const tokens = String(input.paid_for_artist)\r\n      .split(/[;,]/)\r\n      .map((t) => normalizeArtistName(t))\r\n      .filter((t) => t.length > 0);\r\n    result.paid_for_artist = tokens.join(\", \");\r\n  }\r\n  if (result.description) {\r\n    result.description = result.description.trim().toUpperCase();\r\n  }\r\n  if (result.remark) {\r\n    result.remark = result.remark.trim().toUpperCase();\r\n  }\r\n  if (result.category) {\r\n    result.category = result.category.trim().toUpperCase();\r\n  }\r\n  if (result.mode) {\r\n    result.mode = result.mode.trim().toUpperCase();\r\n  }\r\n  if (result.invoice_no) {\r\n    result.invoice_no = result.invoice_no.trim().toUpperCase();\r\n  }\r\n  if (input.sr_no !== undefined) {\r\n    const serial = parseNumber(input.sr_no);\r\n    if (serial !== undefined) result.sr_no = serial;\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction normalizePayment(input: Partial<Payment>): Partial<Payment> {\r\n  const result: Partial<Payment> = { ...input };\r\n  const iso = parseIsoDate(input.date);\r\n  if (iso) result.date = iso;\r\n  const serial = parseNumber(input.sr_no);\r\n  if (serial !== undefined) result.sr_no = serial;\r\n  const amount = parseNumber(input.amount_received);\r\n  if (amount !== undefined) result.amount_received = amount;\r\n  if (result.payment_mode) {\r\n    result.payment_mode = result.payment_mode.trim().toUpperCase();\r\n  }\r\n  if (result.received_from) {\r\n    result.received_from = result.received_from.trim().toUpperCase();\r\n  }\r\n  if (result.invoice_no) {\r\n    result.invoice_no = result.invoice_no.trim().toUpperCase();\r\n  }\r\n  if (result.location) {\r\n    result.location = result.location.trim().toUpperCase();\r\n  }\r\n  if (result.work_type) {\r\n    result.work_type = result.work_type.trim().toUpperCase();\r\n  }\r\n  if (result.description) {\r\n    result.description = result.description.trim().toUpperCase();\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction normalizeVacation(input: Partial<Vacation>): Partial<Vacation> {\r\n  const result: Partial<Vacation> = { ...input };\r\n  if (input.artist) {\r\n    result.artist = normalizeArtistName(input.artist);\r\n  }\r\n  if (result.reason) {\r\n    result.reason = result.reason.trim().toUpperCase();\r\n  }\r\n  if (input.vacation_range && (!input.vacation_start || !input.vacation_end)) {\r\n    const range = parseRangeToIso(input.vacation_range);\r\n    if (range) {\r\n      result.vacation_start = range.start;\r\n      result.vacation_end = range.end;\r\n    }\r\n  }\r\n  const startIso = parseIsoDate(result.vacation_start);\r\n  if (startIso) result.vacation_start = startIso;\r\n  const endIso = parseIsoDate(result.vacation_end);\r\n  if (endIso) result.vacation_end = endIso;\r\n  const serial = parseNumber(result.sr_no);\r\n  if (serial !== undefined) result.sr_no = serial;\r\n  return result;\r\n}\r\n\r\nfunction normalizeMasterData(input: Partial<MasterData>): Partial<MasterData> {\r\n  const result: Partial<MasterData> = { ...input };\r\n  if (result.artist) {\r\n    result.artist = normalizeArtistName(result.artist);\r\n  }\r\n  if (result.coordinator) {\r\n    result.coordinator = result.coordinator.trim().toUpperCase();\r\n  }\r\n  if (result.payment_mode) {\r\n    result.payment_mode = result.payment_mode.trim().toUpperCase();\r\n  }\r\n  if (result.work_type) {\r\n    result.work_type = result.work_type.trim().toUpperCase();\r\n  }\r\n  if (result.month) {\r\n    result.month = result.month.trim().toUpperCase();\r\n  }\r\n  if (result.expense_category) {\r\n    result.expense_category = result.expense_category.trim().toUpperCase();\r\n  }\r\n  const year = parseNumber(result.year);\r\n  if (year !== undefined) result.year = year;\r\n  return result;\r\n}\r\n\r\nrouter.options(\"*\", () =>\r\n  new Response(null, {\r\n    status: 204,\r\n    headers: {\r\n      \"Access-Control-Allow-Origin\": \"*\",\r\n      \"Access-Control-Allow-Methods\": \"GET,POST,PUT,PATCH,DELETE,OPTIONS\",\r\n      \"Access-Control-Allow-Headers\": \"Content-Type,Authorization,Origin,Accept\"\r\n    }\r\n  })\r\n);\r\n\r\nrouter.get(\"/\", () => {\r\n  return json({\r\n    message: \"Roaster API is running\",\r\n    endpoints: [\r\n      \"/api/shoots\",\r\n      \"/api/payments\",\r\n      \"/api/expenses\",\r\n      \"/api/vacations\",\r\n      \"/api/master-data\",\r\n      \"/api/artists\",\r\n      \"/api/availability\",\r\n      \"/api/yearly-summary\",\r\n      \"/api/roaster-entries\",\r\n      \"/api/summary\"\r\n    ]\r\n  });\r\n});\r\n\r\nrouter.get(\"/api/health\", async (_request, env: Env) => {\r\n  const ok = await queryOne<{ ok: number }>(env, \"SELECT 1 as ok\", []);\r\n  return json({ ok: ok?.ok === 1 });\r\n});\r\n\r\nrouter.get(\"/api/shoots\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const { page, pageSize, offset } = getPagination(url);\r\n\r\n  const where: string[] = [];\r\n  const params: unknown[] = [];\r\n\r\n  const invoiceNo = url.searchParams.get(\"invoice_no\");\r\n  const coordinator = url.searchParams.get(\"coordinator\");\r\n  const location = url.searchParams.get(\"location\");\r\n  const from = url.searchParams.get(\"from\");\r\n  const to = url.searchParams.get(\"to\");\r\n\r\n  if (invoiceNo) {\r\n    where.push(\"invoice_no LIKE ?\");\r\n    params.push(`%${invoiceNo}%`);\r\n  }\r\n  if (coordinator) {\r\n    where.push(\"coordinator LIKE ?\");\r\n    params.push(`%${coordinator}%`);\r\n  }\r\n  if (location) {\r\n    where.push(\"location LIKE ?\");\r\n    params.push(`%${location}%`);\r\n  }\r\n  if (from) {\r\n    where.push(\"inv_date >= ?\");\r\n    params.push(from);\r\n  }\r\n  if (to) {\r\n    where.push(\"inv_date <= ?\");\r\n    params.push(to);\r\n  }\r\n\r\n  const whereSql = where.length ? `WHERE ${where.join(\" AND \")}` : \"\";\r\n\r\n  const totalRow = await queryOne<{ count: number }>(\r\n    env,\r\n    `SELECT COUNT(*) as count FROM shoots ${whereSql}`,\r\n    params\r\n  );\r\n  const total = totalRow?.count ?? 0;\r\n\r\n  const items = await queryAll<Shoot>(\r\n    env,\r\n    `SELECT * FROM shoots ${whereSql} ORDER BY inv_date DESC, id DESC LIMIT ? OFFSET ?`,\r\n    [...params, pageSize, offset]\r\n  );\r\n\r\n  const payload: Paginated<Shoot> = {\r\n    items,\r\n    page,\r\n    pageSize,\r\n    total\r\n  };\r\n\r\n  return json(payload);\r\n});\r\n\r\nrouter.get(\"/api/shoots/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  const shoot = await queryOne<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE id = ?\",\r\n    [id]\r\n  );\r\n\r\n  if (!shoot) {\r\n    return json({ success: false, error: \"Not found\" }, 404);\r\n  }\r\n\r\n  return json<Shoot>({ success: true, data: shoot });\r\n});\r\n\r\nrouter.post(\"/api/shoots\", async (request, env: Env) => {\r\n  let body: Shoot;\r\n  try {\r\n    body = await readJson<Shoot>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  if (!body.invoice_no) {\r\n    return json({ success: false, error: \"invoice_no is required\" }, 400);\r\n  }\r\n\r\n  const existing = await queryOne<Shoot>(\r\n    env,\r\n    \"SELECT id FROM shoots WHERE invoice_no = ?\",\r\n    [body.invoice_no]\r\n  );\r\n  if (existing) {\r\n    return json(\r\n      { success: false, error: \"invoice_no already exists\" },\r\n      409\r\n    );\r\n  }\r\n\r\n  const shoot = computeShootDerivedFields(body);\r\n\r\n  if (!shoot.inv_date) {\r\n    return json(\r\n      { success: false, error: \"inv_date or valid shoot_dates is required\" },\r\n      400\r\n    );\r\n  }\r\n\r\n  const sql = `\r\n    INSERT INTO shoots (\r\n      inv_date, coordinator, invoice_no, location, work_type, description,\r\n      shoot_dates, shoot_start_date, shoot_end_date, artist_provided,\r\n      total_artists, per_day_rate, work_days, amount, received, balance,\r\n      status, total_expense\r\n    ) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    shoot.inv_date,\r\n    shoot.coordinator ?? null,\r\n    shoot.invoice_no,\r\n    shoot.location ?? null,\r\n    shoot.work_type ?? null,\r\n    shoot.description ?? null,\r\n    shoot.shoot_dates ?? null,\r\n    shoot.shoot_start_date ?? null,\r\n    shoot.shoot_end_date ?? null,\r\n    shoot.artist_provided ?? null,\r\n    shoot.total_artists ?? null,\r\n    shoot.per_day_rate ?? null,\r\n    shoot.work_days ?? null,\r\n    shoot.amount ?? null,\r\n    shoot.received ?? null,\r\n    shoot.balance ?? null,\r\n    shoot.status ?? null,\r\n    shoot.total_expense ?? null\r\n  ];\r\n\r\n  let meta;\r\n  try {\r\n    meta = await execute(env, sql, params);\r\n  } catch (error) {\r\n    const msg = String((error as Error).message || \"\");\r\n    if (/unique/i.test(msg) && /invoice_no/i.test(msg)) {\r\n      return json(\r\n        { success: false, error: \"invoice_no already exists\" },\r\n        409\r\n      );\r\n    }\r\n    throw error;\r\n  }\r\n  const created = await queryOne<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE id = ?\",\r\n    [meta.last_row_id]\r\n  );\r\n\r\n  return json<Shoot>({ success: true, data: created! }, 201);\r\n});\r\n\r\nrouter.put(\"/api/shoots/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  let body: Shoot;\r\n  try {\r\n    body = await readJson<Shoot>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  body.id = id;\r\n\r\n  const shoot = computeShootDerivedFields(body);\r\n\r\n  const sql = `\r\n    UPDATE shoots SET\r\n      inv_date = ?,\r\n      coordinator = ?,\r\n      invoice_no = ?,\r\n      location = ?,\r\n      work_type = ?,\r\n      description = ?,\r\n      shoot_dates = ?,\r\n      shoot_start_date = ?,\r\n      shoot_end_date = ?,\r\n      artist_provided = ?,\r\n      total_artists = ?,\r\n      per_day_rate = ?,\r\n      work_days = ?,\r\n      amount = ?,\r\n      received = ?,\r\n      balance = ?,\r\n      status = ?,\r\n      total_expense = ?,\r\n      updated_at = CURRENT_TIMESTAMP\r\n    WHERE id = ?\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    shoot.inv_date,\r\n    shoot.coordinator ?? null,\r\n    shoot.invoice_no,\r\n    shoot.location ?? null,\r\n    shoot.work_type ?? null,\r\n    shoot.description ?? null,\r\n    shoot.shoot_dates ?? null,\r\n    shoot.shoot_start_date ?? null,\r\n    shoot.shoot_end_date ?? null,\r\n    shoot.artist_provided ?? null,\r\n    shoot.total_artists ?? null,\r\n    shoot.per_day_rate ?? null,\r\n    shoot.work_days ?? null,\r\n    shoot.amount ?? null,\r\n    shoot.received ?? null,\r\n    shoot.balance ?? null,\r\n    shoot.status ?? null,\r\n    shoot.total_expense ?? null,\r\n    id\r\n  ];\r\n\r\n  try {\r\n    await execute(env, sql, params);\r\n  } catch (error) {\r\n    const msg = String((error as Error).message || \"\");\r\n    if (/unique/i.test(msg) && /invoice_no/i.test(msg)) {\r\n      return json(\r\n        { success: false, error: \"invoice_no already exists\" },\r\n        409\r\n      );\r\n    }\r\n    throw error;\r\n  }\r\n\r\n  const updated = await queryOne<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE id = ?\",\r\n    [id]\r\n  );\r\n  return json<Shoot>({ success: true, data: updated! });\r\n});\r\n\r\nrouter.patch(\"/api/shoots/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  let body: Partial<Shoot>;\r\n  try {\r\n    body = await readJson<Partial<Shoot>>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const existing = await queryOne<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE id = ?\",\r\n    [id]\r\n  );\r\n  if (!existing) {\r\n    return json({ success: false, error: \"Not found\" }, 404);\r\n  }\r\n\r\n  const merged = computeShootDerivedFields({ ...existing, ...body });\r\n\r\n  const sql = `\r\n    UPDATE shoots SET\r\n      inv_date = ?,\r\n      coordinator = ?,\r\n      invoice_no = ?,\r\n      location = ?,\r\n      work_type = ?,\r\n      description = ?,\r\n      shoot_dates = ?,\r\n      shoot_start_date = ?,\r\n      shoot_end_date = ?,\r\n      artist_provided = ?,\r\n      total_artists = ?,\r\n      per_day_rate = ?,\r\n      work_days = ?,\r\n      amount = ?,\r\n      received = ?,\r\n      balance = ?,\r\n      status = ?,\r\n      total_expense = ?,\r\n      updated_at = CURRENT_TIMESTAMP\r\n    WHERE id = ?\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    merged.inv_date,\r\n    merged.coordinator ?? null,\r\n    merged.invoice_no,\r\n    merged.location ?? null,\r\n    merged.work_type ?? null,\r\n    merged.description ?? null,\r\n    merged.shoot_dates ?? null,\r\n    merged.shoot_start_date ?? null,\r\n    merged.shoot_end_date ?? null,\r\n    merged.artist_provided ?? null,\r\n    merged.total_artists ?? null,\r\n    merged.per_day_rate ?? null,\r\n    merged.work_days ?? null,\r\n    merged.amount ?? null,\r\n    merged.received ?? null,\r\n    merged.balance ?? null,\r\n    merged.status ?? null,\r\n    merged.total_expense ?? null,\r\n    id\r\n  ];\r\n\r\n  await execute(env, sql, params);\r\n\r\n  const updated = await queryOne<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE id = ?\",\r\n    [id]\r\n  );\r\n  return json<Shoot>({ success: true, data: updated! });\r\n});\r\n\r\nrouter.get(\"/api/expenses\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const { page, pageSize, offset } = getPagination(url);\r\n\r\n  const where: string[] = [];\r\n  const params: unknown[] = [];\r\n\r\n  const invoice = url.searchParams.get(\"invoice_no\");\r\n  const category = url.searchParams.get(\"category\");\r\n  const mode = url.searchParams.get(\"mode\");\r\n  const vendor = url.searchParams.get(\"vendor\");\r\n  const description = url.searchParams.get(\"description\");\r\n  const from = url.searchParams.get(\"from\");\r\n  const to = url.searchParams.get(\"to\");\r\n\r\n  if (invoice) {\r\n    where.push(\"invoice_no LIKE ?\");\r\n    params.push(`%${invoice}%`);\r\n  }\r\n  if (category) {\r\n    where.push(\"category LIKE ?\");\r\n    params.push(`%${category}%`);\r\n  }\r\n  if (mode) {\r\n    where.push(\"mode LIKE ?\");\r\n    params.push(`%${mode}%`);\r\n  }\r\n  if (vendor) {\r\n    where.push(\"paid_for_artist LIKE ?\");\r\n    params.push(`%${vendor}%`);\r\n  }\r\n  if (description) {\r\n    where.push(\"description LIKE ?\");\r\n    params.push(`%${description}%`);\r\n  }\r\n  if (from) {\r\n    where.push(\"date >= ?\");\r\n    params.push(from);\r\n  }\r\n  if (to) {\r\n    where.push(\"date <= ?\");\r\n    params.push(to);\r\n  }\r\n\r\n  const whereSql = where.length ? `WHERE ${where.join(\" AND \")}` : \"\";\r\n\r\n  const totalRow = await queryOne<{ count: number }>(\r\n    env,\r\n    `SELECT COUNT(*) as count FROM expenses ${whereSql}`,\r\n    params\r\n  );\r\n\r\n  const items = await queryAll<Expense>(\r\n    env,\r\n    `SELECT * FROM expenses ${whereSql} ORDER BY date DESC, id DESC LIMIT ? OFFSET ?`,\r\n    [...params, pageSize, offset]\r\n  );\r\n\r\n  return json<Paginated<Expense>>({\r\n    items,\r\n    page,\r\n    pageSize,\r\n    total: totalRow?.count ?? 0\r\n  });\r\n});\r\n\r\nrouter.post(\"/api/expenses\", async (request, env: Env) => {\r\n  let body: Expense;\r\n  try {\r\n    body = await readJson<Expense>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const expense = normalizeExpense(body);\r\n  if (!expense.date) {\r\n    return json({ success: false, error: \"date is required\" }, 400);\r\n  }\r\n\r\n  const sql = `\r\n    INSERT INTO expenses (\r\n      sr_no, date, description, remark, paid_for_artist, category, mode,\r\n      invoice_no, amount_out, amount_in, total_expense\r\n    ) VALUES (?,?,?,?,?,?,?,?,?,?,?)\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    expense.sr_no ?? null,\r\n    expense.date,\r\n    expense.description ?? null,\r\n    expense.remark ?? null,\r\n    expense.paid_for_artist ?? null,\r\n    expense.category ?? null,\r\n    expense.mode ?? null,\r\n    expense.invoice_no ?? null,\r\n    expense.amount_out ?? null,\r\n    expense.amount_in ?? null,\r\n    expense.total_expense ?? null\r\n  ];\r\n\r\n  const meta = await execute(env, sql, params);\r\n  const created = await queryOne<Expense>(\r\n    env,\r\n    \"SELECT * FROM expenses WHERE id = ?\",\r\n    [meta.last_row_id]\r\n  );\r\n\r\n  return json(created!);\r\n});\r\n\r\nrouter.patch(\"/api/expenses/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  let body: Partial<Expense>;\r\n  try {\r\n    body = await readJson<Partial<Expense>>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const existing = await queryOne<Expense>(\r\n    env,\r\n    \"SELECT * FROM expenses WHERE id = ?\",\r\n    [id]\r\n  );\r\n  if (!existing) {\r\n    return json({ success: false, error: \"Not found\" }, 404);\r\n  }\r\n\r\n  const merged = normalizeExpense({ ...existing, ...body });\r\n\r\n  const sql = `\r\n    UPDATE expenses SET\r\n      sr_no = ?,\r\n      date = ?,\r\n      description = ?,\r\n      remark = ?,\r\n      paid_for_artist = ?,\r\n      category = ?,\r\n      mode = ?,\r\n      invoice_no = ?,\r\n      amount_out = ?,\r\n      amount_in = ?,\r\n      total_expense = ?\r\n    WHERE id = ?\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    merged.sr_no ?? null,\r\n    merged.date ?? existing.date,\r\n    merged.description ?? null,\r\n    merged.remark ?? null,\r\n    merged.paid_for_artist ?? null,\r\n    merged.category ?? null,\r\n    merged.mode ?? null,\r\n    merged.invoice_no ?? null,\r\n    merged.amount_out ?? null,\r\n    merged.amount_in ?? null,\r\n    merged.total_expense ?? null,\r\n    id\r\n  ];\r\n\r\n  await execute(env, sql, params);\r\n\r\n  const updated = await queryOne<Expense>(\r\n    env,\r\n    \"SELECT * FROM expenses WHERE id = ?\",\r\n    [id]\r\n  );\r\n\r\n  return json(updated!);\r\n});\r\n\r\nrouter.delete(\"/api/expenses/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n  await execute(env, \"DELETE FROM expenses WHERE id = ?\", [id]);\r\n  return json({ success: true });\r\n});\r\n\r\nrouter.get(\"/api/payments\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const { page, pageSize, offset } = getPagination(url);\r\n\r\n  const where: string[] = [];\r\n  const params: unknown[] = [];\r\n\r\n  const invoice = url.searchParams.get(\"invoice_no\");\r\n  const mode = url.searchParams.get(\"payment_mode\");\r\n  const receivedFrom = url.searchParams.get(\"received_from\");\r\n  const location = url.searchParams.get(\"location\");\r\n  const workType = url.searchParams.get(\"work_type\");\r\n  const description = url.searchParams.get(\"description\");\r\n  const from = url.searchParams.get(\"from\");\r\n  const to = url.searchParams.get(\"to\");\r\n\r\n  if (invoice) {\r\n    where.push(\"invoice_no LIKE ?\");\r\n    params.push(`%${invoice}%`);\r\n  }\r\n  if (mode) {\r\n    where.push(\"payment_mode LIKE ?\");\r\n    params.push(`%${mode}%`);\r\n  }\r\n  if (receivedFrom) {\r\n    where.push(\"received_from LIKE ?\");\r\n    params.push(`%${receivedFrom}%`);\r\n  }\r\n  if (location) {\r\n    where.push(\"location LIKE ?\");\r\n    params.push(`%${location}%`);\r\n  }\r\n  if (workType) {\r\n    where.push(\"work_type LIKE ?\");\r\n    params.push(`%${workType}%`);\r\n  }\r\n  if (description) {\r\n    where.push(\"description LIKE ?\");\r\n    params.push(`%${description}%`);\r\n  }\r\n  if (from) {\r\n    where.push(\"date >= ?\");\r\n    params.push(from);\r\n  }\r\n  if (to) {\r\n    where.push(\"date <= ?\");\r\n    params.push(to);\r\n  }\r\n\r\n  const whereSql = where.length ? `WHERE ${where.join(\" AND \")}` : \"\";\r\n\r\n  const totalRow = await queryOne<{ count: number }>(\r\n    env,\r\n    `SELECT COUNT(*) as count FROM payments_received ${whereSql}`,\r\n    params\r\n  );\r\n\r\n  const items = await queryAll<Payment>(\r\n    env,\r\n    `SELECT * FROM payments_received ${whereSql} ORDER BY date DESC, id DESC LIMIT ? OFFSET ?`,\r\n    [...params, pageSize, offset]\r\n  );\r\n\r\n  return json<Paginated<Payment>>({\r\n    items,\r\n    page,\r\n    pageSize,\r\n    total: totalRow?.count ?? 0\r\n  });\r\n});\r\n\r\nrouter.post(\"/api/payments\", async (request, env: Env) => {\r\n  let body: Payment;\r\n  try {\r\n    body = await readJson<Payment>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const payment = normalizePayment(body);\r\n  if (!payment.date) {\r\n    return json({ success: false, error: \"date is required\" }, 400);\r\n  }\r\n\r\n  const sql = `\r\n    INSERT INTO payments_received (\r\n      sr_no, date, received_from, invoice_no, location, work_type,\r\n      description, payment_mode, amount_received\r\n    ) VALUES (?,?,?,?,?,?,?,?,?)\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    payment.sr_no ?? null,\r\n    payment.date,\r\n    payment.received_from ?? null,\r\n    payment.invoice_no ?? null,\r\n    payment.location ?? null,\r\n    payment.work_type ?? null,\r\n    payment.description ?? null,\r\n    payment.payment_mode ?? null,\r\n    payment.amount_received ?? null\r\n  ];\r\n\r\n  const meta = await execute(env, sql, params);\r\n  const created = await queryOne<Payment>(\r\n    env,\r\n    \"SELECT * FROM payments_received WHERE id = ?\",\r\n    [meta.last_row_id]\r\n  );\r\n\r\n  if (created?.invoice_no) {\r\n    const sumRow = await queryOne<{ sum: number }>(\r\n      env,\r\n      \"SELECT SUM(amount_received) as sum FROM payments_received WHERE invoice_no = ?\",\r\n      [created.invoice_no]\r\n    );\r\n    const sum = sumRow?.sum ?? 0;\r\n    await execute(\r\n      env,\r\n      \"UPDATE shoots SET received = ?, balance = COALESCE(amount,0) - ? WHERE invoice_no = ?\",\r\n      [sum, sum, created.invoice_no]\r\n    );\r\n  }\r\n\r\n  return json(created!);\r\n});\r\n\r\nrouter.post(\"/api/calculate-coordinator-amount\", async (request) => {\r\n  const body = await readJson<{\r\n    date?: string | null;\r\n    number_of_artists: number;\r\n    work_type?: string | null;\r\n    per_day_rate?: number | null;\r\n    work_days?: number | null;\r\n    artists?: string | null;\r\n  }>(request);\r\n  const result = calculateCoordinatorAmount(body);\r\n  return json(result);\r\n});\r\n\r\nrouter.get(\"/api/availability\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const from = url.searchParams.get(\"from\");\r\n  const to = url.searchParams.get(\"to\");\r\n  const artistsParam = url.searchParams.get(\"artists\") || \"\";\r\n  if (!from || !to) {\r\n    return json({ success: false, error: \"from and to are required (YYYY-MM-DD)\" }, 400);\r\n  }\r\n  const artists = parseArtistList(artistsParam);\r\n  const shoots = await queryAll<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE shoot_start_date <= ? AND shoot_end_date >= ?\",\r\n    [to, from]\r\n  );\r\n  const vacations = await queryAll<Vacation>(\r\n    env,\r\n    \"SELECT * FROM vacations WHERE vacation_end >= ? AND vacation_start <= ?\",\r\n    [from, to]\r\n  );\r\n  const result: Record<string, { booked: string[]; vacation: string[]; conflicts: string[] }> = {};\r\n  const start = new Date(from);\r\n  const end = new Date(to);\r\n  const dates: string[] = [];\r\n  for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {\r\n    dates.push(d.toISOString().slice(0, 10));\r\n  }\r\n  const setFor = (name: string) => (result[name] ||= { booked: [], vacation: [], conflicts: [] });\r\n\r\n  // Mark bookings from shoots\r\n  for (const shoot of shoots) {\r\n    const list = parseArtistList(shoot.artist_provided);\r\n    const s = new Date(shoot.shoot_start_date || from);\r\n    const e = new Date(shoot.shoot_end_date || to);\r\n    for (let d = new Date(s); d <= e; d.setDate(d.getDate() + 1)) {\r\n      const iso = d.toISOString().slice(0, 10);\r\n      if (iso < from || iso > to) continue;\r\n      for (const a of list) {\r\n        if (artists.length && !artists.includes(a)) continue;\r\n        const bucket = setFor(a);\r\n        bucket.booked.push(iso);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Mark vacations\r\n  for (const vac of vacations) {\r\n    const a = vac.artist ? normalizeArtistName(vac.artist) : undefined;\r\n    if (!a) continue;\r\n    if (artists.length && !artists.includes(a)) continue;\r\n    const s = new Date(vac.vacation_start || from);\r\n    const e = new Date(vac.vacation_end || to);\r\n    for (let d = new Date(s); d <= e; d.setDate(d.getDate() + 1)) {\r\n      const iso = d.toISOString().slice(0, 10);\r\n      if (iso < from || iso > to) continue;\r\n      const bucket = setFor(a);\r\n      bucket.vacation.push(iso);\r\n    }\r\n  }\r\n\r\n  // Conflicts\r\n  for (const a of Object.keys(result)) {\r\n    const bucket = result[a];\r\n    const bookedSet = new Set(bucket.booked);\r\n    const vacSet = new Set(bucket.vacation);\r\n    dates.forEach((d) => {\r\n      if (bookedSet.has(d) && vacSet.has(d)) bucket.conflicts.push(d);\r\n    });\r\n    bucket.booked = Array.from(bookedSet).sort();\r\n    bucket.vacation = Array.from(vacSet).sort();\r\n    bucket.conflicts = Array.from(new Set(bucket.conflicts)).sort();\r\n  }\r\n\r\n  return json(result);\r\n});\r\n\r\nrouter.patch(\"/api/payments/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  let body: Partial<Payment>;\r\n  try {\r\n    body = await readJson<Partial<Payment>>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const existing = await queryOne<Payment>(\r\n    env,\r\n    \"SELECT * FROM payments_received WHERE id = ?\",\r\n    [id]\r\n  );\r\n  if (!existing) {\r\n    return json({ success: false, error: \"Not found\" }, 404);\r\n  }\r\n\r\n  const merged = normalizePayment({ ...existing, ...body });\r\n\r\n  const sql = `\r\n    UPDATE payments_received SET\r\n      sr_no = ?,\r\n      date = ?,\r\n      received_from = ?,\r\n      invoice_no = ?,\r\n      location = ?,\r\n      work_type = ?,\r\n      description = ?,\r\n      payment_mode = ?,\r\n      amount_received = ?\r\n    WHERE id = ?\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    merged.sr_no ?? null,\r\n    merged.date ?? existing.date,\r\n    merged.received_from ?? null,\r\n    merged.invoice_no ?? null,\r\n    merged.location ?? null,\r\n    merged.work_type ?? null,\r\n    merged.description ?? null,\r\n    merged.payment_mode ?? null,\r\n    merged.amount_received ?? null,\r\n    id\r\n  ];\r\n\r\n  await execute(env, sql, params);\r\n\r\n  const updated = await queryOne<Payment>(\r\n    env,\r\n    \"SELECT * FROM payments_received WHERE id = ?\",\r\n    [id]\r\n  );\r\n  if (updated?.invoice_no) {\r\n    const sumRow = await queryOne<{ sum: number }>(\r\n      env,\r\n      \"SELECT COALESCE(SUM(amount_received),0) as sum FROM payments_received WHERE invoice_no = ?\",\r\n      [updated.invoice_no]\r\n    );\r\n    const sum = sumRow?.sum ?? 0;\r\n    await execute(\r\n      env,\r\n      \"UPDATE shoots SET received = ?, balance = COALESCE(amount,0) - ? WHERE invoice_no = ?\",\r\n      [sum, sum, updated.invoice_no]\r\n    );\r\n  }\r\n  return json(updated!);\r\n});\r\n\r\nrouter.delete(\"/api/payments/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n  const existing = await queryOne<Payment>(\r\n    env,\r\n    \"SELECT * FROM payments_received WHERE id = ?\",\r\n    [id]\r\n  );\r\n  await execute(env, \"DELETE FROM payments_received WHERE id = ?\", [id]);\r\n  if (existing?.invoice_no) {\r\n    const sumRow = await queryOne<{ sum: number }>(\r\n      env,\r\n      \"SELECT COALESCE(SUM(amount_received),0) as sum FROM payments_received WHERE invoice_no = ?\",\r\n      [existing.invoice_no]\r\n    );\r\n    const sum = sumRow?.sum ?? 0;\r\n    await execute(\r\n      env,\r\n      \"UPDATE shoots SET received = ?, balance = COALESCE(amount,0) - ? WHERE invoice_no = ?\",\r\n      [sum, sum, existing.invoice_no]\r\n    );\r\n  }\r\n  return json({ success: true });\r\n});\r\n\r\nrouter.get(\"/api/vacations\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const { page, pageSize, offset } = getPagination(url);\r\n\r\n  const where: string[] = [];\r\n  const params: unknown[] = [];\r\n\r\n  const artist = url.searchParams.get(\"artist\");\r\n  const from = url.searchParams.get(\"from\");\r\n  const to = url.searchParams.get(\"to\");\r\n\r\n  if (artist) {\r\n    where.push(\"artist = ?\");\r\n    params.push(normalizeArtistName(artist));\r\n  }\r\n  if (from) {\r\n    where.push(\"vacation_start >= ?\");\r\n    params.push(from);\r\n  }\r\n  if (to) {\r\n    where.push(\"vacation_end <= ?\");\r\n    params.push(to);\r\n  }\r\n\r\n  const whereSql = where.length ? `WHERE ${where.join(\" AND \")}` : \"\";\r\n\r\n  const totalRow = await queryOne<{ count: number }>(\r\n    env,\r\n    `SELECT COUNT(*) as count FROM vacations ${whereSql}`,\r\n    params\r\n  );\r\n\r\n  const items = await queryAll<Vacation>(\r\n    env,\r\n    `SELECT * FROM vacations ${whereSql} ORDER BY vacation_start DESC, id DESC LIMIT ? OFFSET ?`,\r\n    [...params, pageSize, offset]\r\n  );\r\n\r\n  return json<Paginated<Vacation>>({\r\n    items,\r\n    page,\r\n    pageSize,\r\n    total: totalRow?.count ?? 0\r\n  });\r\n});\r\n\r\nrouter.post(\"/api/vacations\", async (request, env: Env) => {\r\n  let body: Vacation;\r\n  try {\r\n    body = await readJson<Vacation>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const vacation = normalizeVacation(body);\r\n  if (!vacation.artist || !vacation.vacation_start || !vacation.vacation_end) {\r\n    return json(\r\n      { success: false, error: \"artist and vacation range are required\" },\r\n      400\r\n    );\r\n  }\r\n\r\n  const sql = `\r\n    INSERT INTO vacations (\r\n      sr_no, artist, vacation_range, reason, vacation_start, vacation_end\r\n    ) VALUES (?,?,?,?,?,?)\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    vacation.sr_no ?? null,\r\n    vacation.artist,\r\n    vacation.vacation_range ?? null,\r\n    vacation.reason ?? null,\r\n    vacation.vacation_start,\r\n    vacation.vacation_end\r\n  ];\r\n\r\n  const meta = await execute(env, sql, params);\r\n  const created = await queryOne<Vacation>(\r\n    env,\r\n    \"SELECT * FROM vacations WHERE id = ?\",\r\n    [meta.last_row_id]\r\n  );\r\n\r\n  return json(created!);\r\n});\r\n\r\nrouter.patch(\"/api/vacations/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  let body: Partial<Vacation>;\r\n  try {\r\n    body = await readJson<Partial<Vacation>>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const existing = await queryOne<Vacation>(\r\n    env,\r\n    \"SELECT * FROM vacations WHERE id = ?\",\r\n    [id]\r\n  );\r\n  if (!existing) {\r\n    return json({ success: false, error: \"Not found\" }, 404);\r\n  }\r\n\r\n  const merged = normalizeVacation({ ...existing, ...body });\r\n\r\n  const sql = `\r\n    UPDATE vacations SET\r\n      sr_no = ?,\r\n      artist = ?,\r\n      vacation_range = ?,\r\n      reason = ?,\r\n      vacation_start = ?,\r\n      vacation_end = ?\r\n    WHERE id = ?\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    merged.sr_no ?? null,\r\n    merged.artist ?? existing.artist,\r\n    merged.vacation_range ?? null,\r\n    merged.reason ?? null,\r\n    merged.vacation_start ?? existing.vacation_start,\r\n    merged.vacation_end ?? existing.vacation_end,\r\n    id\r\n  ];\r\n\r\n  await execute(env, sql, params);\r\n\r\n  const updated = await queryOne<Vacation>(\r\n    env,\r\n    \"SELECT * FROM vacations WHERE id = ?\",\r\n    [id]\r\n  );\r\n\r\n  return json(updated!);\r\n});\r\n\r\nrouter.delete(\"/api/vacations/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n  await execute(env, \"DELETE FROM vacations WHERE id = ?\", [id]);\r\n  return json({ success: true });\r\n});\r\n\r\nrouter.get(\"/api/master-data\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const { page, pageSize, offset } = getPagination(url);\r\n\r\n  const where: string[] = [];\r\n  const params: unknown[] = [];\r\n\r\n  const q = url.searchParams.get(\"q\");\r\n  const coordinator = url.searchParams.get(\"coordinator\");\r\n  const artist = url.searchParams.get(\"artist\");\r\n  const paymentMode = url.searchParams.get(\"payment_mode\");\r\n\r\n  if (coordinator) {\r\n    where.push(\"coordinator LIKE ?\");\r\n    params.push(`%${coordinator}%`);\r\n  }\r\n  if (artist) {\r\n    where.push(\"artist = ?\");\r\n    params.push(normalizeArtistName(artist));\r\n  }\r\n  if (paymentMode) {\r\n    where.push(\"payment_mode LIKE ?\");\r\n    params.push(`%${paymentMode}%`);\r\n  }\r\n\r\n  \r\n\r\n  const whereSql = where.length ? `WHERE ${where.join(\" AND \")}` : \"\";\r\n\r\n  const totalRow = await queryOne<{ count: number }>(\r\n    env,\r\n    `SELECT COUNT(*) as count FROM master_data ${whereSql}`,\r\n    params\r\n  );\r\n\r\n  const items = await queryAll<MasterData>(\r\n    env,\r\n    `SELECT * FROM master_data ${whereSql} ORDER BY id DESC LIMIT ? OFFSET ?`,\r\n    [...params, pageSize, offset]\r\n  );\r\n\r\n  return json<Paginated<MasterData>>({\r\n    items,\r\n    page,\r\n    pageSize,\r\n    total: totalRow?.count ?? 0\r\n  });\r\n});\r\n\r\nrouter.post(\"/api/master-data\", async (request, env: Env) => {\r\n  let body: MasterData;\r\n  try {\r\n    body = await readJson<MasterData>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const record = normalizeMasterData(body);\r\n\r\n  const sql = `\r\n    INSERT INTO master_data (\r\n      payment_mode, coordinator, artist, work_type, month, year, expense_category\r\n    ) VALUES (?,?,?,?,?,?,?)\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    record.payment_mode ?? null,\r\n    record.coordinator ?? null,\r\n    record.artist ?? null,\r\n    record.work_type ?? null,\r\n    record.month ?? null,\r\n    record.year ?? null,\r\n    record.expense_category ?? null\r\n  ];\r\n\r\n  const meta = await execute(env, sql, params);\r\n  const created = await queryOne<MasterData>(\r\n    env,\r\n    \"SELECT * FROM master_data WHERE id = ?\",\r\n    [meta.last_row_id]\r\n  );\r\n\r\n  return json(created!);\r\n});\r\n\r\nrouter.patch(\"/api/master-data/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  let body: Partial<MasterData>;\r\n  try {\r\n    body = await readJson<Partial<MasterData>>(request);\r\n  } catch (error) {\r\n    return json({ success: false, error: (error as Error).message }, 400);\r\n  }\r\n\r\n  const existing = await queryOne<MasterData>(\r\n    env,\r\n    \"SELECT * FROM master_data WHERE id = ?\",\r\n    [id]\r\n  );\r\n  if (!existing) {\r\n    return json({ success: false, error: \"Not found\" }, 404);\r\n  }\r\n\r\n  const merged = normalizeMasterData({ ...existing, ...body });\r\n\r\n  const sql = `\r\n    UPDATE master_data SET\r\n      payment_mode = ?,\r\n      coordinator = ?,\r\n      artist = ?,\r\n      work_type = ?,\r\n      month = ?,\r\n      year = ?,\r\n      expense_category = ?\r\n    WHERE id = ?\r\n  `;\r\n\r\n  const params: unknown[] = [\r\n    merged.payment_mode ?? null,\r\n    merged.coordinator ?? null,\r\n    merged.artist ?? null,\r\n    merged.work_type ?? null,\r\n    merged.month ?? null,\r\n    merged.year ?? null,\r\n    merged.expense_category ?? null,\r\n    id\r\n  ];\r\n\r\n  await execute(env, sql, params);\r\n\r\n  const updated = await queryOne<MasterData>(\r\n    env,\r\n    \"SELECT * FROM master_data WHERE id = ?\",\r\n    [id]\r\n  );\r\n\r\n  return json(updated!);\r\n});\r\n\r\nrouter.delete(\"/api/master-data/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n  await execute(env, \"DELETE FROM master_data WHERE id = ?\", [id]);\r\n  return json({ success: true });\r\n});\r\n\r\nrouter.get(\"/api/roaster-entries\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const where: string[] = [];\r\n  const params: unknown[] = [];\r\n\r\n  const from = url.searchParams.get(\"from\");\r\n  const to = url.searchParams.get(\"to\");\r\n  const artist = url.searchParams.get(\"artist\");\r\n\r\n  if (from) {\r\n    where.push(\"date >= ?\");\r\n    params.push(from);\r\n  }\r\n  if (to) {\r\n    where.push(\"date <= ?\");\r\n    params.push(to);\r\n  }\r\n  if (artist) {\r\n    where.push(\"artist = ?\");\r\n    params.push(normalizeArtistName(artist));\r\n  }\r\n\r\n  const whereSql = where.length ? `WHERE ${where.join(\" AND \")}` : \"\";\r\n\r\n  const entries = await queryAll<RoasterEntry>(\r\n    env,\r\n    `SELECT * FROM roaster_entries ${whereSql} ORDER BY date ASC, artist ASC`,\r\n    params\r\n  );\r\n\r\n  return json(entries);\r\n});\r\n\r\n\r\nrouter.delete(\"/api/shoots/:id\", async (request, env: Env) => {\r\n  const id = Number(request.params?.id);\r\n  if (!Number.isFinite(id)) {\r\n    return json({ success: false, error: \"Invalid id\" }, 400);\r\n  }\r\n\r\n  await execute(env, \"DELETE FROM shoots WHERE id = ?\", [id]);\r\n  return json({ success: true });\r\n});\r\n\r\nrouter.get(\"/api/artists\", async (_request, env: Env) => {\r\n  const fromMaster = await queryAll<{ artist: string }>(\r\n    env,\r\n    \"SELECT DISTINCT UPPER(TRIM(artist)) as artist FROM master_data WHERE artist IS NOT NULL AND TRIM(artist) <> ''\"\r\n  );\r\n\r\n  const fromShoots = await queryAll<{ artist_provided: string }>(\r\n    env,\r\n    \"SELECT DISTINCT artist_provided FROM shoots WHERE artist_provided IS NOT NULL\"\r\n  );\r\n\r\n  const set = new Set<string>();\r\n  fromMaster.forEach((row) => {\r\n    if (row.artist) set.add(row.artist);\r\n  });\r\n  fromShoots.forEach((row) => {\r\n    parseArtistList(row.artist_provided).forEach((artist) => set.add(artist));\r\n  });\r\n\r\n  const artists = Array.from(set).sort();\r\n  return json<string[]>({ success: true, data: artists });\r\n});\r\n\r\nrouter.post(\"/api/roaster-generate\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const month = parseInt(url.searchParams.get(\"month\") || \"\", 10);\r\n  const year = parseInt(url.searchParams.get(\"year\") || \"\", 10);\r\n\r\n  if (!month || !year) {\r\n    return json(\r\n      { success: false, error: \"month and year query params are required\" },\r\n      400\r\n    );\r\n  }\r\n\r\n  const monthStr = month.toString().padStart(2, \"0\");\r\n  const start = `${year}-${monthStr}-01`;\r\n  const end = `${year}-${monthStr}-31`;\r\n\r\n  const shoots = await queryAll<Shoot>(\r\n    env,\r\n    \"SELECT * FROM shoots WHERE shoot_start_date <= ? AND shoot_end_date >= ?\",\r\n    [end, start]\r\n  );\r\n\r\n  const vacations = await queryAll<Vacation>(\r\n    env,\r\n    \"SELECT * FROM vacations WHERE vacation_end >= ? AND vacation_start <= ?\",\r\n    [start, end]\r\n  );\r\n\r\n  const result = buildRoasterMatrix(shoots, vacations, month, year);\r\n\r\n  const statements: { sql: string; params: unknown[] }[] = [\r\n    {\r\n      sql: \"DELETE FROM roaster_entries WHERE date BETWEEN ? AND ?\",\r\n      params: [start, end]\r\n    },\r\n    ...result.entries.map((entry) => ({\r\n      sql: `\r\n        INSERT INTO roaster_entries (\r\n          date, artist, source_invoice, coordinator, location,\r\n          work_type, description, role\r\n        ) VALUES (?,?,?,?,?,?,?,?)\r\n      `,\r\n      params: [\r\n        entry.date,\r\n        entry.artist,\r\n        entry.source_invoice,\r\n        entry.coordinator ?? null,\r\n        entry.location ?? null,\r\n        entry.work_type ?? null,\r\n        entry.description ?? null,\r\n        null\r\n      ]\r\n    }))\r\n  ];\r\n\r\n  await transaction(env, statements);\r\n\r\n  return json({\r\n    month,\r\n    year,\r\n    artists: result.artists,\r\n    dates: result.dates,\r\n    matrix: result.matrix\r\n  });\r\n});\r\n\r\nrouter.get(\"/api/summary\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const month = parseInt(url.searchParams.get(\"month\") || \"\", 10);\r\n  const year = parseInt(url.searchParams.get(\"year\") || \"\", 10);\r\n\r\n  if (!month || !year) {\r\n    return json(\r\n      { success: false, error: \"month and year query params are required\" },\r\n      400\r\n    );\r\n  }\r\n\r\n  const monthStr = month.toString().padStart(2, \"0\");\r\n  const start = `${year}-${monthStr}-01`;\r\n  const end = `${year}-${monthStr}-31`;\r\n\r\n  const [{ total_shoots = 0 } = {}] = await queryAll<{\r\n    total_shoots: number;\r\n  }>(\r\n    env,\r\n    \"SELECT COUNT(*) as total_shoots FROM shoots WHERE inv_date BETWEEN ? AND ?\",\r\n    [start, end]\r\n  );\r\n\r\n  const [{ total_payments = 0 } = {}] = await queryAll<{\r\n    total_payments: number;\r\n  }>(\r\n    env,\r\n    \"SELECT COALESCE(SUM(amount_received),0) as total_payments FROM payments_received WHERE date BETWEEN ? AND ?\",\r\n    [start, end]\r\n  );\r\n\r\n  const [{ total_expenses = 0 } = {}] = await queryAll<{\r\n    total_expenses: number;\r\n  }>(\r\n    env,\r\n    \"SELECT COALESCE(SUM(amount_out - amount_in),0) as total_expenses FROM expenses WHERE date BETWEEN ? AND ?\",\r\n    [start, end]\r\n  );\r\n\r\n  const net_balance = total_payments - total_expenses;\r\n\r\n  await execute(\r\n    env,\r\n    `\r\n      INSERT INTO summary (\r\n        month, year, total_shoots, total_payments, total_expenses, net_balance\r\n      ) VALUES (?,?,?,?,?,?)\r\n    `,\r\n    [month, year, total_shoots, total_payments, total_expenses, net_balance]\r\n  );\r\n\r\n  const latest = await queryOne<Summary>(\r\n    env,\r\n    `\r\n      SELECT *\r\n      FROM summary\r\n      WHERE month = ? AND year = ?\r\n      ORDER BY generated_at DESC\r\n      LIMIT 1\r\n    `,\r\n    [month, year]\r\n  );\r\n\r\n  return json<Summary>({ success: true, data: latest! });\r\n});\r\n\r\nrouter.get(\"/api/yearly-summary\", async (request, env: Env) => {\r\n  const url = new URL(request.url);\r\n  const year = parseInt(url.searchParams.get(\"year\") || \"\", 10);\r\n  if (!year) {\r\n    return json({ success: false, error: \"year query param is required\" }, 400);\r\n  }\r\n\r\n  const yearStr = year.toString();\r\n  const prevYearStr = (year - 1).toString();\r\n\r\n  const [{ rev = 0 } = {}] = await queryAll<{ rev: number }>(\r\n    env,\r\n    \"SELECT COALESCE(SUM(amount_received),0) as rev FROM payments_received WHERE strftime('%Y', date) = ?\",\r\n    [yearStr]\r\n  );\r\n  const [{ exp = 0 } = {}] = await queryAll<{ exp: number }>(\r\n    env,\r\n    \"SELECT COALESCE(SUM(amount_out - amount_in),0) as exp FROM expenses WHERE strftime('%Y', date) = ?\",\r\n    [yearStr]\r\n  );\r\n  const [{ shoots = 0 } = {}] = await queryAll<{ shoots: number }>(\r\n    env,\r\n    \"SELECT COUNT(*) as shoots FROM shoots WHERE strftime('%Y', inv_date) = ?\",\r\n    [yearStr]\r\n  );\r\n\r\n  const monthlyPayments = await queryAll<{ m: string; total: number }>(\r\n    env,\r\n    \"SELECT strftime('%m', date) as m, COALESCE(SUM(amount_received),0) as total FROM payments_received WHERE strftime('%Y', date) = ? GROUP BY m ORDER BY m\",\r\n    [yearStr]\r\n  );\r\n  const monthlyExpenses = await queryAll<{ m: string; total: number }>(\r\n    env,\r\n    \"SELECT strftime('%m', date) as m, COALESCE(SUM(amount_out - amount_in),0) as total FROM expenses WHERE strftime('%Y', date) = ? GROUP BY m ORDER BY m\",\r\n    [yearStr]\r\n  );\r\n  const monthlyShoots = await queryAll<{ m: string; total: number }>(\r\n    env,\r\n    \"SELECT strftime('%m', inv_date) as m, COUNT(*) as total FROM shoots WHERE strftime('%Y', inv_date) = ? GROUP BY m ORDER BY m\",\r\n    [yearStr]\r\n  );\r\n\r\n  const topClients = await queryAll<{ name: string | null; total: number }>(\r\n    env,\r\n    \"SELECT received_from as name, COALESCE(SUM(amount_received),0) as total FROM payments_received WHERE strftime('%Y', date) = ? AND received_from IS NOT NULL GROUP BY received_from ORDER BY total DESC LIMIT 5\",\r\n    [yearStr]\r\n  );\r\n  const topExpenseCats = await queryAll<{ name: string | null; total: number }>(\r\n    env,\r\n    \"SELECT category as name, COALESCE(SUM(amount_out - amount_in),0) as total FROM expenses WHERE strftime('%Y', date) = ? AND category IS NOT NULL GROUP BY category ORDER BY total DESC LIMIT 5\",\r\n    [yearStr]\r\n  );\r\n\r\n  const [{ prev_rev = 0 } = {}] = await queryAll<{ prev_rev: number }>(\r\n    env,\r\n    \"SELECT COALESCE(SUM(amount_received),0) as prev_rev FROM payments_received WHERE strftime('%Y', date) = ?\",\r\n    [prevYearStr]\r\n  );\r\n  const [{ prev_exp = 0 } = {}] = await queryAll<{ prev_exp: number }>(\r\n    env,\r\n    \"SELECT COALESCE(SUM(amount_out - amount_in),0) as prev_exp FROM expenses WHERE strftime('%Y', date) = ?\",\r\n    [prevYearStr]\r\n  );\r\n\r\n  const profit = rev - exp;\r\n  const prevProfit = prev_rev - prev_exp;\r\n\r\n  const growthPct = (cur: number, prev: number) => {\r\n    if (!prev) return cur ? 100 : 0;\r\n    return ((cur - prev) / Math.abs(prev)) * 100;\r\n  };\r\n\r\n  return json({\r\n    year,\r\n    totals: {\r\n      revenue: rev,\r\n      expenses: exp,\r\n      profit,\r\n      shoots\r\n    },\r\n    monthly: {\r\n      revenue: monthlyPayments,\r\n      expenses: monthlyExpenses,\r\n      shoots: monthlyShoots\r\n    },\r\n    top_clients: topClients,\r\n    top_expenses: topExpenseCats,\r\n    compare_prev_year: {\r\n      revenue: { current: rev, previous: prev_rev, growth_pct: growthPct(rev, prev_rev) },\r\n      expenses: { current: exp, previous: prev_exp, growth_pct: growthPct(exp, prev_exp) },\r\n      profit: { current: profit, previous: prevProfit, growth_pct: growthPct(profit, prevProfit) }\r\n    }\r\n  });\r\n});\r\n\r\nrouter.all(\"*\", () =>\r\n  json({ success: false, error: \"Not found\" }, 404)\r\n);\r\n\r\nexport default {\r\n  async fetch(request: Request, env: Env, _ctx: ExecutionContext) {\r\n    try {\r\n      const res = await router.handle(request, env, _ctx);\r\n      if (res instanceof Response) {\r\n        return withCors(request, env, res);\r\n      }\r\n      return withCors(request, env, json({ success: false, error: \"Not found\" }, 404));\r\n    } catch (error) {\r\n      return withCors(\r\n        request,\r\n        env,\r\n        json(\r\n          {\r\n            success: false,\r\n            error:\r\n              error instanceof Error ? error.message : \"Unexpected error\"\r\n          },\r\n          500\r\n        )\r\n      );\r\n    }\r\n  }\r\n};\r\n \r\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\worker\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\worker\\\\index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\.wrangler\\\\tmp\\\\bundle-fGRUdt\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\worker\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\.wrangler\\\\tmp\\\\bundle-fGRUdt\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\adhij\\\\Downloads\\\\Roaster Application - Cine Flakes Entertainment Pvt Ltd\\\\.wrangler\\\\tmp\\\\bundle-fGRUdt\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": ["Router", "base", "routes", "other", "__proto__", "Proxy", "get", "target", "prop", "receiver", "path", "fetch", "route", "handlers", "push", "toUpperCase", "RegExp", "replace", "async", "request", "args", "response", "match", "url", "URL", "query", "k", "v", "searchParams", "concat", "method", "regex", "pathname", "params", "groups", "handler", "proxy", "createResponse", "format", "transform", "body", "headers", "rest", "constructor", "name", "Response", "entries", "Object", "fromEntries", "json", "JSON", "stringify", "text", "createResponse", "String", "html", "jpeg", "png", "webp", "d", "i", "o", "d", "s", "e", "e", "e"]
}
